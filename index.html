<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apostila de Estudos - Produ√ß√£o Textual</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Estilos gerais e customizados para o template */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .resumo-tabela {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .resumo-tabela th, .resumo-tabela td {
            border: 1px solid #e5e7eb;
            padding: 0.75rem;
            text-align: left;
        }
        .resumo-tabela th {
            background-color: #f3f4f6;
            font-weight: 600;
            color: #1f2937;
        }
        .main-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        @media (min-width: 1024px) {
            .main-container {
                grid-template-columns: 2fr 1fr;
            }
        }
        .content-section, .sidebar-section {
            background-color: #ffffff;
            padding: 2.5rem;
            border-radius: 1rem;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
        }
        .pin-icon {
            color: #ef4444; /* Vermelho */
            font-size: 1.25rem;
            margin-right: 0.5rem;
        }
        /* Estilo para recuo inicial do par√°grafo */
        .text-indent {
            text-indent: 2em;
        }
        /* Estilos para grifo e coment√°rio */
        .highlighted {
            background-color: #fde047; /* amarelo */
            padding: 2px 0;
            border-radius: 3px;
            cursor: pointer;
            position: relative;
        }
        .highlighted[data-comment]:hover {
            background-color: #fcd34d;
        }
        .comment-box {
            display: none;
            position: absolute;
            z-index: 10;
            background-color: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            padding: 12px;
            min-width: 250px;
            max-width: 350px;
            bottom: 125%; /* Posi√ß√£o acima do texto */
            left: 50%;
            transform: translateX(-50%);
            white-space: normal;
            font-size: 0.9rem;
            line-height: 1.4;
            color: #1f2937;
        }
        .comment-box::after { /* Seta para baixo */
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border-width: 8px;
            border-style: solid;
            border-color: #fff transparent transparent transparent;
        }
        .comments-section {
            background-color: #f9fafb;
            padding: 1.5rem;
            border-radius: 0.75rem;
            border: 1px solid #e2e8f0;
        }
        .action-buttons {
            position: absolute;
            z-index: 20;
            display: none;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 8px;
            gap: 8px;
        }
        .action-buttons button {
            background-color: #4a5568;
            color: white;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .action-buttons button:hover {
            background-color: #2d3748;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 50;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
    </style>
</head>
<body class="p-0">
    <header class="bg-blue-900 text-white p-6 md:p-8 rounded-b-xl flex flex-col items-center text-center mb-8">
        <h1 class="text-3xl md:text-4xl font-extrabold mb-2 flex items-center justify-center">
            <img src="https://i.ibb.co/HLmTyPQb/emblema-curso.png" alt="Emblema do curso" class="w-16 h-16 mr-4 rounded-full shadow-lg">
            Apostila de Estudos ‚Äì Cursinho Preparat√≥rio
        </h1>
        <h2 class="text-xl md:text-2xl font-bold mb-1">Produ√ß√£o Textual</h2>
        <h3 class="text-lg md:text-xl font-semibold">para Concursos da Educa√ß√£o</h3>
    </header>

    <div class="main-container">
        <!-- Se√ß√£o de Conte√∫do da Apostila -->
        <div class="content-section" id="content-section">
            <!-- T√≠tulo do M√≥dulo -->
            <h2 class="text-3xl font-extrabold text-gray-800 mb-6">1. M√ìDULO 1 ‚Äì Fundamentos da Produ√ß√£o Textual em Concursos da Educa√ß√£o</h2>

            <!-- Se√ß√£o 1.1 -->
            <h3 class="text-2xl font-bold text-gray-800 mb-4">1.1 A reda√ß√£o como etapa eliminat√≥ria e classificat√≥ria</h3>
            <p class="mb-4 text-lg text-justify text-indent">Nos concursos p√∫blicos da √°rea da educa√ß√£o, a reda√ß√£o costuma ter peso alto na nota final.</p>
            <p class="mb-8 text-lg text-justify text-indent">Normalmente, o candidato precisa escrever um texto dissertativo-argumentativo sobre pol√≠ticas educacionais, legisla√ß√£o, gest√£o escolar ou temas sociais ligados √† educa√ß√£o.</p>
            
            <div class="bg-blue-50 p-4 rounded-lg mb-8">
                <p class="mt-2 text-lg font-bold flex items-center">
                    <span class="pin-icon">üìå</span> Exemplo de temas reais:
                </p>
                <ul class="list-disc list-inside mt-2 space-y-1 text-lg pl-4">
                    <li>O papel da gest√£o democr√°tica na escola p√∫blica</li>
                    <li>A import√¢ncia da educa√ß√£o inclusiva no s√©culo XXI</li>
                    <li>Tecnologia como ferramenta pedag√≥gica</li>
                    <li>O papel do Atendimento Educacional Especializado (AEE) na inclus√£o escolar</li>
                </ul>
            </div>

            <!-- Se√ß√£o 1.2 -->
            <h3 class="text-2xl font-bold text-gray-800 mb-4">1.2 Crit√©rios de avalia√ß√£o mais comuns</h3>
            <div class="mb-8 overflow-x-auto pl-4">
                <table class="resumo-tabela min-w-full">
                    <thead>
                        <tr>
                            <th>Crit√©rio</th>
                            <th>O que significa</th>
                            <th>Exemplo de aplica√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Atendimento ao tema</td>
                            <td>Responder exatamente ao que foi pedido</td>
                            <td>Se o tema √© educa√ß√£o inclusiva, n√£o focar s√≥ em tecnologia</td>
                        </tr>
                        <tr>
                            <td>Coes√£o</td>
                            <td>Conex√£o entre ideias</td>
                            <td>Uso de conectivos: ‚Äúportanto‚Äù, ‚Äúal√©m disso‚Äù</td>
                        </tr>
                        <tr>
                            <td>Coer√™ncia</td>
                            <td>L√≥gica interna</td>
                            <td>N√£o se contradizer durante o texto</td>
                        </tr>
                        <tr>
                            <td>Norma culta</td>
                            <td>Gram√°tica e ortografia corretas</td>
                            <td>‚ÄúHouveram‚Äù ‚ùå ‚Üí ‚ÄúHouve‚Äù ‚úÖ</td>
                        </tr>
                        <tr>
                            <td>Argumenta√ß√£o</td>
                            <td>Defesa consistente da tese</td>
                            <td>Citar dados do MEC, autores da √°rea</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Se√ß√£o sobre Coes√£o Textual -->
            <h4 class="text-xl font-bold text-gray-800 mb-4">1.2.1 O que √© coes√£o textual?</h4>
            <p class="mb-4 text-lg text-justify text-indent">Coes√£o √© o conjunto de mecanismos lingu√≠sticos que conectam as partes de um texto, garantindo que frases e par√°grafos se unam de forma fluida e l√≥gica.</p>
            <p class="mb-4 text-lg text-justify text-indent">Ela n√£o garante que o texto fa√ßa sentido (isso √© fun√ß√£o da coer√™ncia), mas garante que ele seja bem ‚Äúcosturado‚Äù.</p>
            <p class="mb-8 text-lg text-justify text-indent">Pense que a coes√£o √© como a cola que une as ideias.</p>

            <div class="bg-blue-50 p-4 rounded-lg mb-8">
                <p class="mt-2 text-lg font-bold flex items-center">
                    <span class="pin-icon">üìå</span> Exemplo:
                </p>
                <div class="mt-2 space-y-2 text-lg pl-4">
                    <p class="font-bold">Sem coes√£o:</p>
                    <p class="italic">A escola precisa de reformas. Os professores reclamam. A gest√£o n√£o sabe o que fazer.</p>
                    <p class="font-bold">Com coes√£o:</p>
                    <p class="italic">A escola precisa de reformas, o que tem gerado reclama√ß√µes dos professores, enquanto a gest√£o busca solu√ß√µes.</p>
                </div>
            </div>

            <h4 class="text-xl font-bold text-gray-800 mb-4">1.2.2 Tipos de coes√£o</h4>
            <h5 class="text-lg font-semibold text-gray-700 mb-2">1.2.2.1 Coes√£o Referencial</h5>
            <p class="mb-2 text-lg text-justify text-indent">Ocorre quando usamos pronomes ou express√µes para retomar termos j√° citados.</p>
            <p class="mb-4 text-lg text-justify text-indent">Fun√ß√£o: Evitar repeti√ß√£o.</p>
            
            <div class="mb-8 overflow-x-auto pl-4">
                <table class="resumo-tabela min-w-full">
                    <thead>
                        <tr>
                            <th>Sem coes√£o</th>
                            <th>Com coes√£o</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Maria √© professora. Maria gosta de inovar. Maria usa tecnologia.</td>
                            <td>Maria √© professora. Ela gosta de inovar e utiliza tecnologia.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h5 class="text-lg font-semibold text-gray-700 mb-2">1.2.2.2 Coes√£o Sequencial</h5>
            <p class="mb-2 text-lg text-justify text-indent">Usa conectivos e marcadores textuais para indicar rela√ß√£o entre ideias.</p>
            <p class="mb-4 text-lg text-justify text-indent">Fun√ß√£o: Organizar o fluxo l√≥gico.</p>

            <div class="bg-blue-50 p-4 rounded-lg mb-8">
                <p class="mt-2 text-lg font-bold flex items-center">
                    <span class="pin-icon">üìå</span> Principais conectivos:
                </p>
                <div class="mt-4 overflow-x-auto pl-4">
                    <table class="resumo-tabela min-w-full">
                        <thead>
                            <tr>
                                <th>Fun√ß√£o</th>
                                <th>Exemplos</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Adi√ß√£o</td>
                                <td>e, al√©m disso, tamb√©m</td>
                            </tr>
                            <tr>
                                <td>Oposi√ß√£o</td>
                                <td>mas, por√©m, no entanto</td>
                            </tr>
                            <tr>
                                <td>Causa</td>
                                <td>porque, visto que, j√° que</td>
                            </tr>
                            <tr>
                                <td>Consequ√™ncia</td>
                                <td>portanto, assim, logo</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <h5 class="text-lg font-semibold text-gray-700 mb-2">1.2.2.3 Coes√£o Lexical</h5>
            <p class="mb-4 text-lg text-justify text-indent">Repeti√ß√£o controlada ou substitui√ß√£o por sin√¥nimos.</p>
            <p class="mb-4 text-lg text-justify text-indent">Fun√ß√£o: Variar o vocabul√°rio sem perder o sentido.</p>
            
            <div class="bg-blue-50 p-4 rounded-lg mb-8">
                <p class="mt-2 text-lg font-bold flex items-center">
                    <span class="pin-icon">üìå</span> Exemplo:
                </p>
                <p class="italic mt-2 pl-4">A escola promoveu um evento cultural. A institui√ß√£o reuniu alunos, professores e pais para prestigiar as apresenta√ß√µes.</p>
            </div>

            <h5 class="text-lg font-semibold text-gray-700 mb-2">1.2.2.4 Coes√£o por Elipse</h5>
            <p class="mb-4 text-lg text-justify text-indent">Quando omitimos um termo que pode ser subentendido pelo contexto.</p>
            <div class="bg-blue-50 p-4 rounded-lg mb-8">
                <p class="mt-2 text-lg font-bold flex items-center">
                    <span class="pin-icon">üìå</span> Exemplo:
                </p>
                <p class="italic mt-2 pl-4">Os professores participaram da reuni√£o; os alunos, n√£o. (‚Äúparticiparam‚Äù est√° impl√≠cito na segunda parte)</p>
            </div>

            <h5 class="text-lg font-semibold text-gray-700 mb-2">1.2.2.5 Coes√£o por Substitui√ß√£o</h5>
            <p class="mb-4 text-lg text-justify text-indent">Trocar uma palavra ou express√£o por outra equivalente.</p>
            <p class="mb-4 text-lg text-justify text-indent">Muito usada para evitar repeti√ß√µes.</p>
            <div class="bg-blue-50 p-4 rounded-lg mb-8">
                <p class="mt-2 text-lg font-bold flex items-center">
                    <span class="pin-icon">üìå</span> Exemplo:
                </p>
                <p class="italic mt-2 pl-4">O gestor apresentou o projeto pedag√≥gico. O documento foi aprovado pelo conselho escolar.</p>
            </div>

            <h4 class="text-xl font-bold text-gray-800 mb-4">1.2.3 Por que a coes√£o √© essencial na reda√ß√£o de concurso da educa√ß√£o?</h4>
            <ul class="list-disc list-inside mb-8 space-y-2 text-lg pl-4">
                <li>√â crit√©rio de corre√ß√£o em praticamente todos os editais.</li>
                <li>Facilita a leitura e compreens√£o pelo avaliador.</li>
                <li>Transmite profissionalismo e dom√≠nio da norma culta.</li>
            </ul>

            <h4 class="text-xl font-bold text-gray-800 mb-4">1.2.4 Erros comuns que prejudicam a coes√£o</h4>
            <div class="mb-8 overflow-x-auto pl-4">
                <table class="resumo-tabela min-w-full">
                    <thead>
                        <tr>
                            <th>Erro</th>
                            <th>Exemplo</th>
                            <th>Como corrigir</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Contradi√ß√£o</td>
                            <td>‚ÄúA BNCC garante autonomia docente, por isso todos devem seguir o mesmo material obrigat√≥rio.‚Äù</td>
                            <td>Ajustar para que as ideias sejam compat√≠veis</td>
                        </tr>
                        <tr>
                            <td>Falta de foco</td>
                            <td>Come√ßa sobre educa√ß√£o infantil e termina falando de esportes profissionais</td>
                            <td>Manter todas as ideias ligadas ao tema</td>
                        </tr>
                        <tr>
                            <td>Argumentos il√≥gicos</td>
                            <td>‚ÄúQuanto mais aulas, menos aprendizado.‚Äù</td>
                            <td>Apresentar rela√ß√£o l√≥gica ou dados que sustentem</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Se√ß√£o sobre Coer√™ncia Textual -->
            <h4 class="text-xl font-bold text-gray-800 mb-4">1.2.5 O que √© coer√™ncia textual?</h4>
            <p class="mb-4 text-lg text-justify text-indent">Coer√™ncia √© a qualidade que garante que o texto fa√ßa sentido, mantendo l√≥gica interna e rela√ß√£o com o conhecimento de mundo do leitor.</p>
            <p class="mb-4 text-lg text-justify text-indent">Enquanto a coes√£o √© a cola que liga as frases, a coer√™ncia √© o fio condutor que faz o texto ter sentido global.</p>
            
            <div class="bg-blue-50 p-4 rounded-lg mb-8">
                <p class="mt-2 text-lg font-bold flex items-center">
                    <span class="pin-icon">üìå</span> Exemplo:
                </p>
                <div class="mt-2 space-y-2 text-lg pl-4">
                    <p class="font-bold">Com coes√£o, mas sem coer√™ncia:</p>
                    <p class="italic">Os alunos participaram ativamente da aula, portanto o professor precisou pedir sil√™ncio. (H√° conectivo, mas a rela√ß√£o √© il√≥gica.)</p>
                    <p class="font-bold">Com coer√™ncia e coes√£o:</p>
                    <p class="italic">Os alunos estavam conversando muito, por isso o professor precisou pedir sil√™ncio.</p>
                </div>
            </div>

            <h4 class="text-xl font-bold text-gray-800 mb-4">1.2.5.1 Princ√≠pios da coer√™ncia textual</h4>
            <h5 class="text-lg font-semibold text-gray-700 mb-2">1.2.5.1.1 Relev√¢ncia</h5>
            <p class="mb-2 text-lg text-justify text-indent">O texto deve apresentar informa√ß√µes relacionadas ao tema.</p>
            <p class="mb-4 text-lg text-justify text-indent">
                <span class="font-bold">üìå Erro:</span> inserir informa√ß√µes aleat√≥rias que desviam o foco.
            </p>
            <p class="mb-2 font-bold pl-4">Tema: Avalia√ß√£o escolar</p>
            <p class="italic pl-4">‚ùå ‚ÄúA escola precisa melhorar a avalia√ß√£o. Al√©m disso, o bairro precisa de mais transporte p√∫blico.‚Äù</p>
            <p class="italic mb-4 pl-4">‚úÖ ‚ÄúA escola precisa melhorar a avalia√ß√£o, incorporando m√©todos formativos que favore√ßam o aprendizado.‚Äù</p>

            <h5 class="text-lg font-semibold text-gray-700 mb-2">1.2.5.1.2 N√£o contradi√ß√£o</h5>
            <p class="mb-2 text-lg text-justify text-indent">O texto n√£o pode se contradizer.</p>
            <p class="italic pl-4">‚ùå ‚ÄúA gest√£o democr√°tica exige participa√ß√£o de todos, mas a comunidade escolar n√£o deve opinar.‚Äù</p>
            <p class="italic mb-4 pl-4">‚úÖ ‚ÄúA gest√£o democr√°tica exige participa√ß√£o de todos, valorizando a opini√£o da comunidade escolar.‚Äù</p>

            <h5 class="text-lg font-semibold text-gray-700 mb-2">1.2.5.1.3 Progress√£o tem√°tica</h5>
            <p class="mb-2 text-lg text-justify text-indent">As ideias devem evoluir de forma gradual, sem ‚Äúdar voltas‚Äù desnecess√°rias.</p>
            <p class="italic pl-4">‚ùå Come√ßa falando de tecnologia, depois muda para alimenta√ß√£o escolar, e volta para tecnologia.</p>
            <p class="italic mb-4 pl-4">‚úÖ Inicia sobre tecnologia, aprofunda, apresenta exemplos e conclui.</p>

            <h5 class="text-lg font-semibold text-gray-700 mb-2">1.2.5.1.4 Consist√™ncia l√≥gica</h5>
            <p class="mb-2 text-lg text-justify text-indent">Os argumentos devem ter rela√ß√£o de causa e consequ√™ncia coerentes.</p>
            <p class="italic pl-4">‚ùå ‚ÄúA evas√£o escolar aumentou, logo os professores foram premiados.‚Äù</p>
            <p class="italic mb-4 pl-4">‚úÖ ‚ÄúA evas√£o escolar aumentou, logo a secretaria adotou medidas de perman√™ncia.‚Äù</p>

            <h5 class="text-lg font-semibold text-gray-700 mb-2">1.2.5.1.5 Apoio no conhecimento de mundo</h5>
            <p class="mb-2 text-lg text-justify text-indent">O texto deve considerar o que √© razo√°vel e aceito socialmente.</p>
            <p class="italic pl-4">‚ùå ‚Äú√â poss√≠vel acabar com o analfabetismo em um m√™s.‚Äù</p>
            <p class="italic mb-4 pl-4">‚úÖ ‚ÄúReduzir o analfabetismo exige pol√≠ticas de m√©dio e longo prazo.‚Äù</p>

            <h4 class="text-xl font-bold text-gray-800 mb-4">1.2.5.2 Tipos de coer√™ncia</h4>
            <div class="mb-8 overflow-x-auto pl-4">
                <table class="resumo-tabela min-w-full">
                    <thead>
                        <tr>
                            <th>Tipo</th>
                            <th>Explica√ß√£o</th>
                            <th>Exemplo</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Coer√™ncia global</td>
                            <td>O sentido geral do texto como um todo</td>
                            <td>Tema ‚Äúeduca√ß√£o inclusiva‚Äù ‚Üí todas as partes falam de inclus√£o</td>
                        </tr>
                        <tr>
                            <td>Coer√™ncia local</td>
                            <td>Rela√ß√£o l√≥gica entre frases e par√°grafos pr√≥ximos</td>
                            <td>‚ÄúOs alunos se esfor√ßaram, por isso foram aprovados.‚Äù</td>
                        </tr>
                        <tr>
                            <td>Coer√™ncia pragm√°tica</td>
                            <td>Compatibilidade com a realidade e o contexto social</td>
                            <td>‚ÄúO Brasil investe em educa√ß√£o, mas enfrenta desafios de acesso e qualidade.‚Äù</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h4 class="text-xl font-bold text-gray-800 mb-4">1.2.5.3 Por que a coer√™ncia √© essencial em concursos da educa√ß√£o?</h4>
            <ul class="list-disc list-inside mb-8 space-y-2 text-lg pl-4">
                <li>√â crit√©rio de corre√ß√£o obrigat√≥rio na maioria dos editais.</li>
                <li>Um texto pode estar com ortografia perfeita e coes√£o impec√°vel, mas se perder a coer√™ncia, a nota cai drasticamente.</li>
                <li>Demonstra clareza de racioc√≠nio e objetividade, qualidades esperadas de um profissional da educa√ß√£o.</li>
            </ul>

            <h4 class="text-xl font-bold text-gray-800 mb-4">1.2.5.4 Erros comuns que prejudicam a coer√™ncia</h4>
            <div class="mb-8 overflow-x-auto pl-4">
                <table class="resumo-tabela min-w-full">
                    <thead>
                        <tr>
                            <th>Erro</th>
                            <th>Exemplo</th>
                            <th>Corre√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Contradi√ß√£o</td>
                            <td>‚ÄúA BNCC garante autonomia docente, por isso todos devem seguir o mesmo material obrigat√≥rio.‚Äù</td>
                            <td>Ajustar para que as ideias sejam compat√≠veis</td>
                        </tr>
                        <tr>
                            <td>Falta de foco</td>
                            <td>Come√ßa sobre educa√ß√£o infantil e termina falando de esportes profissionais</td>
                            <td>Manter todas as ideias ligadas ao tema</td>
                        </tr>
                        <tr>
                            <td>Argumentos il√≥gicos</td>
                            <td>‚ÄúQuanto mais aulas, menos aprendizado.‚Äù</td>
                            <td>Apresentar rela√ß√£o l√≥gica ou dados que sustentem</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Se√ß√£o sobre Conectivos -->
            <h4 class="text-xl font-bold text-gray-800 mb-4">1.2.6 A Import√¢ncia dos Conectivos para a Coes√£o e a Coer√™ncia Textual</h4>
            <p class="mb-4 text-lg text-justify text-indent">Os conectivos, tamb√©m chamados de elementos coesivos ou palavras de liga√ß√£o, desempenham um papel fundamental na constru√ß√£o de textos claros, bem estruturados e consistentes. Eles funcionam como pontes que unem palavras, ora√ß√µes e par√°grafos, permitindo que as ideias sejam apresentadas de forma fluida e l√≥gica.</p>
            <p class="mb-4 text-lg text-justify text-indent">Na coes√£o, os conectivos garantem que as partes do texto estejam ligadas de maneira gramatical e sem√¢ntica, evitando que as frases fiquem soltas ou desconexas. J√° na coer√™ncia, eles contribuem para que as ideias mantenham um sentido global e respeitem uma sequ√™ncia l√≥gica de racioc√≠nio, orientando o leitor pela linha de pensamento do autor.</p>
            <p class="mb-4 text-lg text-justify text-indent">O uso adequado dos conectivos tamb√©m:</p>
            <ul class="list-disc list-inside mb-4 space-y-2 text-lg pl-8">
                <li>Organiza as informa√ß√µes, definindo rela√ß√µes de tempo, causa, consequ√™ncia, contraste, etc.</li>
                <li>Facilita a compreens√£o, evitando ambiguidades e interpreta√ß√µes equivocadas.</li>
                <li>Enriquece o estilo do texto, tornando-o mais agrad√°vel e preciso.</li>
                <li>Demonstra dom√≠nio lingu√≠stico, algo valorizado em provas, concursos e reda√ß√µes acad√™micas.</li>
            </ul>
            <p class="mb-8 text-lg text-justify text-indent">Por isso, conhecer e saber empregar corretamente diferentes tipos de conectivos √© essencial para qualquer pessoa que queira escrever bem, especialmente em contextos formais e avaliativos.</p>
            
            <h4 class="text-xl font-bold text-gray-800 mb-4">1.2.6.1 Tabela de Conectivos e Fun√ß√µes no Texto</h4>
            <div class="mb-8 overflow-x-auto pl-4">
                <table class="resumo-tabela min-w-full">
                    <thead>
                        <tr>
                            <th class="bg-yellow-200">Fun√ß√£o no Texto</th>
                            <th>Conectivos/Express√µes</th>
                            <th>Exemplo de Uso</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Adi√ß√£o</td>
                            <td><span class="font-bold">e, al√©m disso, bem como, ainda, n√£o s√≥‚Ä¶ mas tamb√©m, assim como</span></td>
                            <td>O professor deve planejar as aulas e avaliar o progresso dos alunos.</td>
                        </tr>
                        <tr>
                            <td>Oposi√ß√£o / Contraste</td>
                            <td><span class="font-bold">mas, por√©m, contudo, todavia, entretanto, no entanto, embora, mesmo que</span></td>
                            <td>O projeto era promissor, por√©m n√£o foi executado corretamente.</td>
                        </tr>
                        <tr>
                            <td>Conclus√£o</td>
                            <td><span class="font-bold">portanto, logo, assim, por isso, enfim, ent√£o, dessa forma, em suma</span></td>
                            <td>O ensino deve ser inclusivo, portanto √© necess√°rio investir em forma√ß√£o docente.</td>
                        </tr>
                        <tr>
                            <td>Causa / Justificativa</td>
                            <td><span class="font-bold">porque, pois, j√° que, visto que, como (no in√≠cio da frase), porquanto</span></td>
                            <td>O evento foi cancelado porque n√£o havia recursos suficientes.</td>
                        </tr>
                        <tr>
                            <td>Condi√ß√£o</td>
                            <td><span class="font-bold">se, caso, contanto que, desde que, salvo se, a menos que</span></td>
                            <td>O aluno ser√° aprovado se alcan√ßar a m√©dia exigida.</td>
                        </tr>
                        <tr>
                            <td>Finalidade</td>
                            <td><span class="font-bold">para que, a fim de que, com o intuito de, com o objetivo de</span></td>
                            <td>Promoveu reuni√µes a fim de que todos compreendessem as mudan√ßas.</td>
                        </tr>
                        <tr>
                            <td>Conformidade</td>
                            <td><span class="font-bold">conforme, segundo, de acordo com, como</span></td>
                            <td>O projeto foi elaborado de acordo com as diretrizes da LDB.</td>
                        </tr>
                        <tr>
                            <td>Compara√ß√£o</td>
                            <td><span class="font-bold">como, assim como, tal qual, do mesmo modo, tanto quanto, mais‚Ä¶ que, menos‚Ä¶ que</span></td>
                            <td>A gest√£o escolar deve ser participativa, assim como prev√™ a legisla√ß√£o.</td>
                        </tr>
                        <tr>
                            <td>Tempo</td>
                            <td><span class="font-bold">quando, enquanto, assim que, antes que, depois que, desde que, at√© que, logo que</span></td>
                            <td>A reuni√£o come√ßar√° assim que o diretor chegar.</td>
                        </tr>
                        <tr>
                            <td>Explica√ß√£o</td>
                            <td><span class="font-bold">porque, pois (antes do verbo), que, porquanto</span></td>
                            <td>N√£o foi √† escola porque estava doente.</td>
                        </tr>
                        <tr>
                            <td>Exemplifica√ß√£o</td>
                            <td><span class="font-bold">por exemplo, como, tal como, isto √©, ou seja</span></td>
                            <td>Existem diversas pr√°ticas inclusivas, por exemplo, o uso de recursos de acessibilidade.</td>
                        </tr>
                        <tr>
                            <td>√änfase</td>
                            <td><span class="font-bold">sobretudo, especialmente, acima de tudo, principalmente</span></td>
                            <td>A gest√£o deve prezar sobretudo pelo respeito √† diversidade.</td>
                        </tr>
                        <tr>
                            <td>Propor√ß√£o</td>
                            <td><span class="font-bold">√† medida que, quanto mais‚Ä¶ mais, quanto menos‚Ä¶ menos</span></td>
                            <td>A aprendizagem melhora √† medida que o professor adota metodologias ativas.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Se√ß√£o de Jogo dos Conectivos -->
            <div class="connective-game-section bg-yellow-50 p-6 rounded-lg shadow-sm border border-yellow-200">
                <h4 class="text-2xl font-bold text-gray-800 mb-4">1.2.6.2 Conectando Ideias: Jogo dos Conectivos ‚ú®</h4>
                <p class="text-lg text-gray-700 mb-4">Escolha a palavra que melhor preenche a lacuna na frase abaixo.</p>
                
                <div id="connective-question-container" class="bg-white p-6 rounded-lg border mb-4 shadow-sm">
                    <p id="connective-question-text" class="text-xl font-semibold text-gray-800 text-center"></p>
                </div>
                
                <div id="connective-options-container" class="flex flex-wrap justify-center gap-4 mb-4">
                    <!-- Op√ß√µes de bot√µes ser√£o renderizadas aqui -->
                </div>
                
                <div id="connective-feedback" class="text-center text-lg font-bold"></div>
                
                <button id="connective-next-button" class="mt-4 w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg shadow hover:bg-blue-700 transition-colors hidden">
                    Pr√≥xima Pergunta
                </button>
            </div>

            <!-- Se√ß√£o sobre Norma Culta -->
            <h4 class="text-2xl font-bold text-gray-800 mt-8 mb-4">1.2.7 O que √© a Norma Culta?</h4>
            <p class="mb-4 text-lg text-justify text-indent">A Norma Culta √© o conjunto de regras e conven√ß√µes da l√≠ngua portuguesa usadas em contextos formais, como documentos oficiais, reda√ß√µes de concursos, trabalhos acad√™micos e discursos p√∫blicos. Ela se baseia no uso mais consolidado e prestigiado entre pessoas escolarizadas e √© registrada em gram√°ticas, dicion√°rios e manuais de estilo.</p>
            <p class="mb-8 text-lg text-justify text-indent">Em termos pr√°ticos, a norma culta √© o padr√£o lingu√≠stico que demonstra conhecimento da gram√°tica tradicional e adequa√ß√£o ao contexto formal, sendo exigida em situa√ß√µes que pedem clareza, objetividade e corre√ß√£o.</p>

            <h5 class="text-xl font-bold text-gray-800 mb-4">1.2.7.1 Import√¢ncia da Norma Culta</h5>
            <ul class="list-disc list-inside mb-8 space-y-2 text-lg pl-4">
                <li>Credibilidade: aumenta a confian√ßa do leitor ou avaliador em rela√ß√£o ao texto.</li>
                <li>Compreens√£o: garante que a mensagem seja clara e sem ambiguidades.</li>
                <li>Aprova√ß√£o em concursos: nas provas discursivas e reda√ß√µes, erros gramaticais comprometem a nota.</li>
                <li>Formalidade: necess√°ria em situa√ß√µes profissionais, jur√≠dicas, administrativas e acad√™micas.</li>
            </ul>

            <h5 class="text-xl font-bold text-gray-800 mb-4">1.2.7.2 Principais Aspectos da Norma Culta</h5>
            <ul class="list-disc list-inside mb-4 space-y-2 text-lg pl-4">
                <li><span class="font-bold">Ortografia Correta:</span> Seguir as regras vigentes do Acordo Ortogr√°fico da L√≠ngua Portuguesa.<br>Ex.: ideia (n√£o ‚Äúid√©ia‚Äù), her√≥ico ‚Üí heroico.</li>
                <li><span class="font-bold">Concord√¢ncia Verbal e Nominal:</span> Verbo e sujeito devem concordar em n√∫mero e pessoa.<br>Ex.: Os alunos estudaram muito (correto) / Os alunos estudou muito (incorreto).</li>
                <li><span class="font-bold">Reg√™ncia Verbal e Nominal:</span> Uso adequado das preposi√ß√µes exigidas por verbos e nomes.<br>Ex.: Assisti ao filme (verbo assistir no sentido de ver exige preposi√ß√£o "a").</li>
                <li><span class="font-bold">Coloca√ß√£o Pronominal:</span> Emprego correto de pr√≥clise, mes√≥clise e √™nclise, principalmente em contextos formais.<br>Ex.: Dar-me-√£o explica√ß√µes (mes√≥clise, futuro do presente).</li>
                <li><span class="font-bold">Uso Correto de Conectivos:</span> Respeitar a rela√ß√£o l√≥gica entre ideias.<br>Ex.: Estudou bastante, portanto foi aprovado.</li>
                <li><span class="font-bold">Adequa√ß√£o Vocabular:</span> Escolher palavras adequadas ao n√≠vel de formalidade exigido.<br>Evitar g√≠rias, regionalismos e express√µes coloquiais.</li>
                <li><span class="font-bold">Pontua√ß√£o Correta:</span> Uso adequado de v√≠rgulas, ponto e v√≠rgula, dois-pontos, travess√µes, etc., respeitando a sintaxe.<br>Ex.: O professor, muito experiente, explicou tudo com clareza.</li>
            </ul>

            <h5 class="text-xl font-bold text-gray-800 mb-4">1.2.7.3 Norma Culta x Linguagem Coloquial</h5>
            <div class="mb-8 overflow-x-auto pl-4">
                <table class="resumo-tabela min-w-full">
                    <thead>
                        <tr>
                            <th>Aspecto</th>
                            <th>Norma Culta (Formal)</th>
                            <th>Linguagem Coloquial (Informal)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Uso do verbo</td>
                            <td>N√≥s vamos ao cinema.</td>
                            <td>A gente vai no cinema.</td>
                        </tr>
                        <tr>
                            <td>Vocabul√°rio</td>
                            <td>Solicito a gentileza...</td>
                            <td>Quero pedir...</td>
                        </tr>
                        <tr>
                            <td>Pontua√ß√£o</td>
                            <td>Correta e seguindo a norma</td>
                            <td>Muitas vezes despadronizada</td>
                        </tr>
                        <tr>
                            <td>Pronomes</td>
                            <td>Dar-me-√£o resposta amanh√£.</td>
                            <td>Eles v√£o me responder amanh√£.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="bg-blue-50 p-4 rounded-lg mb-8">
                <h5 class="text-lg font-bold">1.2.7.4 Dica para Concursos</h5>
                <p class="mt-2 text-lg text-justify text-indent">Em concursos p√∫blicos da educa√ß√£o, especialmente nas provas discursivas, o uso consistente da norma culta √© crit√©rio de avalia√ß√£o. Pequenos erros de concord√¢ncia, reg√™ncia ou ortografia podem reduzir a pontua√ß√£o mesmo que o conte√∫do esteja bom. Por isso, a pr√°tica constante da escrita formal √© indispens√°vel.</p>
            </div>

            <!-- Se√ß√£o de Jogo da Norma Culta -->
            <div id="norma-culta-quiz-section" class="norma-culta-quiz-section bg-green-50 p-6 rounded-lg shadow-sm border border-green-200 mt-8">
                <h4 class="text-2xl font-bold text-gray-800 mb-4">1.2.8 Jogo da Norma Culta ‚öñÔ∏è</h4>
                <p class="text-lg text-gray-700 mb-4">Teste seus conhecimentos sobre as regras da norma culta com o quiz abaixo.</p>
                
                <div id="norma-culta-question-container" class="bg-white p-6 rounded-lg border mb-4 shadow-sm">
                    <p id="norma-culta-question-text" class="text-xl font-semibold text-gray-800 text-center"></p>
                </div>
                
                <div id="norma-culta-options-container" class="flex flex-wrap justify-center gap-4 mb-4">
                    <!-- Op√ß√µes de bot√µes ser√£o renderizadas aqui -->
                </div>
                
                <div id="norma-culta-feedback" class="text-center text-lg font-bold"></div>
                
                <button id="norma-culta-next-button" class="mt-4 w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg shadow hover:bg-blue-700 transition-colors hidden">
                    Pr√≥xima Pergunta
                </button>
            </div>


            <!-- Se√ß√£o 1.3 -->
            <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">1.3 Etapas da Produ√ß√£o Textual no concurso</h3>
            <ul class="list-disc list-inside mb-8 space-y-2 text-lg pl-4">
                <li>Leitura atenta do tema e comando da prova</li>
                <li>Planejamento de argumentos (3 principais)</li>
                <li>Escrita do rascunho sem preocupa√ß√£o total com erros</li>
                <li>Revis√£o gramatical e de coer√™ncia</li>
                <li>Passagem para a folha oficial com letra leg√≠vel e margens corretas</li>
            </ul>
        </div>
        
        <!-- Se√ß√£o da Sidebar -->
        <div class="sidebar-section">
            
            <!-- Bot√µes de a√ß√£o para grifo e coment√°rio -->
            <div id="action-buttons" class="action-buttons flex">
                <button id="highlight-button">Grifar</button>
                <button id="comment-button">Comentar</button>
            </div>

            <!-- Modal para adicionar coment√°rio -->
            <div id="comment-modal" class="modal">
                <div class="modal-content">
                    <h3 class="text-xl font-bold mb-4">Adicionar Coment√°rio</h3>
                    <textarea id="comment-textarea" class="w-full h-32 p-3 border rounded-lg" placeholder="Digite seu coment√°rio..."></textarea>
                    <div class="flex justify-end mt-4">
                        <button id="cancel-comment-button" class="bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg mr-2">Cancelar</button>
                        <button id="save-comment-button" class="bg-blue-500 text-white font-bold py-2 px-4 rounded-lg">Salvar</button>
                    </div>
                </div>
            </div>

            <!-- Se√ß√£o de Coment√°rios e Anota√ß√µes -->
            <div class="comments-section mb-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">üí¨ Coment√°rios e Anota√ß√µes</h2>
                <div id="comments-list" class="space-y-4">
                    <p class="text-gray-500 text-center">Nenhum coment√°rio ou grifo adicionado.</p>
                </div>
            </div>

            <!-- Nova Se√ß√£o com Gemini API -->
            <div class="gemini-section bg-green-50 p-6 rounded-lg shadow-sm border border-green-200">
                <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                    Gerador de Rascunho ‚ú®
                </h2>
                <p class="text-sm text-gray-600 mb-4 text-justify">Escolha um tema ou digite o seu para gerar um par√°grafo introdut√≥rio para uma reda√ß√£o de concurso.</p>
                
                <div class="mb-4">
                    <label for="gemini-part-select" class="block text-sm font-medium text-gray-700">Selecione a parte da reda√ß√£o:</label>
                    <select id="gemini-part-select" class="mt-1 w-full p-2 border rounded-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-green-400">
                        <option value="introducao">Introdu√ß√£o</option>
                        <option value="desenvolvimento">Desenvolvimento</option>
                        <option value="conclusao">Conclus√£o</option>
                    </select>
                </div>

                <select id="gemini-topic-select" class="w-full p-2 border rounded-lg mb-4 text-gray-700">
                    <option value="">Selecione um tema...</option>
                    <option value="O papel da gest√£o democr√°tica na escola p√∫blica">O papel da gest√£o democr√°tica na escola p√∫blica</option>
                    <option value="A import√¢ncia da educa√ß√£o inclusiva no s√©culo XXI">A import√¢ncia da educa√ß√£o inclusiva no s√©culo XXI</option>
                    <option value="Tecnologia como ferramenta pedag√≥gica">Tecnologia como ferramenta pedag√≥gica</option>
                    <option value="O papel do Atendimento Educacional Especializado (AEE) na inclus√£o escolar">O papel do Atendimento Educacional Especializado (AEE) na inclus√£o escolar</option>
                </select>
                <textarea id="gemini-custom-topic" class="w-full h-16 p-2 border rounded-lg text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-400 resize-none" placeholder="Ou digite seu pr√≥prio tema aqui..."></textarea>
                
                <button id="generate-draft-button" class="mt-4 w-full bg-green-600 text-white font-bold py-2 px-4 rounded-lg shadow hover:bg-green-700 transition-colors">
                    Gerar Rascunho ‚ú®
                </button>
                
                <div id="gemini-output" class="mt-4 p-4 bg-white rounded-lg border hidden">
                    <p class="text-sm italic text-gray-500 mb-2" id="gemini-output-title"></p>
                    <div id="gemini-output-text" class="text-gray-800"></div>
                    <div id="loading-spinner" class="hidden text-center text-gray-500 mt-2">
                        <svg class="animate-spin h-5 w-5 text-green-500 inline-block mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        Gerando...
                    </div>
                </div>
            </div>

        </div>
    </div>

    <footer class="bg-blue-900 text-white text-center p-6 mt-8 rounded-t-xl">
        <p>¬© 2025 Cursinho Preparat√≥rio. Todos os direitos reservados.</p>
    </footer>

    <script>
        // --- Vari√°veis Globais e Configura√ß√£o Inicial para Anota√ß√µes ---
        let selectedText = null;
        let selectionRange = null;
        let actionButtons = null; // Inicializar depois que o DOM estiver carregado
        const contentSection = document.getElementById('content-section');
        const localStorageKey = 'producaoTextualComments';
        let commentsData = JSON.parse(localStorage.getItem(localStorageKey)) || [];
        let lastHighlightId = commentsData.length > 0 ? Math.max(...commentsData.map(c => c.id)) : 0;


        // --- Dados para o Jogo dos Conectivos ---
        const connectiveQuizData = [
            {
                question: "O professor explicou a mat√©ria, ... os alunos entenderam o conte√∫do. (rela√ß√£o de causa e consequ√™ncia)",
                correctAnswer: "portanto",
                options: ["entretanto", "porque", "portanto", "embora"]
            },
            {
                question: "A escola promoveu um evento cultural, ... reuniu alunos, professores e pais. (rela√ß√£o de adi√ß√£o)",
                correctAnswer: "al√©m disso",
                options: ["contudo", "al√©m disso", "visto que", "por√©m"]
            },
            {
                question: "A gest√£o democr√°tica √© fundamental, ... muitos desafios ainda persistem. (rela√ß√£o de oposi√ß√£o)",
                correctAnswer: "mas",
                options: ["ent√£o", "assim", "mas", "para"]
            },
            {
                question: "As crian√ßas se sentem mais seguras ... a fam√≠lia participa da vida escolar. (rela√ß√£o de causa)",
                correctAnswer: "porque",
                options: ["contudo", "ainda que", "portanto", "porque"]
            },
            {
                question: "A tecnologia pode ser uma ferramenta pedag√≥gica, ... seu uso deve ser planejado. (rela√ß√£o de oposi√ß√£o)",
                correctAnswer: "por√©m",
                options: ["e", "ou", "por√©m", "logo"]
            },
            {
                question: "Aprender a coes√£o textual √© crucial ... a reda√ß√£o se torne mais fluida e compreens√≠vel. (rela√ß√£o de finalidade)",
                correctAnswer: "para que",
                options: ["mas", "para que", "visto que", "embora"]
            },
            {
                question: "O novo Plano de Carreira valoriza o profissional, ... h√° insatisfa√ß√£o com a remunera√ß√£o. (rela√ß√£o de oposi√ß√£o)",
                correctAnswer: "entretanto",
                options: ["entretanto", "assim", "portanto", "e"]
            }
        ];

        let currentConnectiveQuestionIndex = 0;

        // --- Fun√ß√µes para o Jogo dos Conectivos ---
        const renderConnectiveQuiz = () => {
            const container = document.getElementById('connective-question-container');
            const optionsContainer = document.getElementById('connective-options-container');
            const feedbackDiv = document.getElementById('connective-feedback');
            const nextButton = document.getElementById('connective-next-button');

            if (!container) return; // Guard clause

            if (currentConnectiveQuestionIndex >= connectiveQuizData.length) {
                container.innerHTML = '<p class="text-xl font-bold text-green-700">Parab√©ns! Voc√™ completou o jogo.</p>';
                optionsContainer.innerHTML = '';
                nextButton.textContent = "Reiniciar Jogo";
                nextButton.classList.remove('hidden');
                nextButton.removeEventListener('click', handleNextConnectiveQuestion);
                nextButton.addEventListener('click', () => {
                    currentConnectiveQuestionIndex = 0;
                    renderConnectiveQuiz();
                });
                return;
            }

            const currentQuestion = connectiveQuizData[currentConnectiveQuestionIndex];
            document.getElementById('connective-question-text').textContent = currentQuestion.question;
            
            optionsContainer.innerHTML = '';
            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.className = 'bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-gray-300 transition-colors';
                button.addEventListener('click', () => handleConnectiveAnswer(option));
                optionsContainer.appendChild(button);
            });

            feedbackDiv.textContent = '';
            nextButton.classList.add('hidden');
        };

        const handleConnectiveAnswer = (selectedOption) => {
            const currentQuestion = connectiveQuizData[currentConnectiveQuestionIndex];
            const feedbackDiv = document.getElementById('connective-feedback');
            const optionsContainer = document.getElementById('connective-options-container');
            const nextButton = document.getElementById('connective-next-button');

            if (selectedOption === currentQuestion.correctAnswer) {
                feedbackDiv.textContent = 'Correto! üéâ';
                feedbackDiv.className = 'text-center text-lg font-bold text-green-600';
            } else {
                feedbackDiv.textContent = `Incorreto. A resposta certa era "${currentQuestion.correctAnswer}".`;
                feedbackDiv.className = 'text-center text-lg font-bold text-red-600';
            }

            // Desabilita os bot√µes e mostra o bot√£o de pr√≥xima pergunta
            Array.from(optionsContainer.children).forEach(button => {
                button.disabled = true;
                if (button.textContent === currentQuestion.correctAnswer) {
                    button.classList.remove('bg-gray-200', 'hover:bg-gray-300');
                    button.classList.add('bg-green-200', 'text-green-800');
                } else if (button.textContent === selectedOption) {
                    button.classList.remove('bg-gray-200', 'hover:bg-gray-300');
                    button.classList.add('bg-red-200', 'text-red-800');
                }
            });
            nextButton.classList.remove('hidden');
            nextButton.removeEventListener('click', handleNextConnectiveQuestion);
            nextButton.addEventListener('click', handleNextConnectiveQuestion);
        };

        const handleNextConnectiveQuestion = () => {
            currentConnectiveQuestionIndex++;
            renderConnectiveQuiz();
        };

        // --- Dados para o Jogo da Norma Culta ---
        const normaCultQuizData = [
            {
                question: "Assinale a alternativa que apresenta a concord√¢ncia verbal correta.",
                correctAnswer: "Os professores e os alunos participaram da reuni√£o.",
                options: [
                    "Os professores e os alunos participou da reuni√£o.",
                    "Os professores e os alunos participaram da reuni√£o.",
                    "O professor e o aluno participaram da reuni√£o."
                ]
            },
            {
                question: "Complete a frase de acordo com a reg√™ncia verbal correta: 'Ele assistiu ... filme.'",
                correctAnswer: "ao",
                options: [
                    "o",
                    "no",
                    "ao"
                ]
            },
            {
                question: "Qual a coloca√ß√£o pronominal mais adequada para um contexto formal?",
                correctAnswer: "Disseram-me que o evento foi cancelado.",
                options: [
                    "Me disseram que o evento foi cancelado.",
                    "Disseram-me que o evento foi cancelado.",
                    "Me falaram que o evento foi cancelado."
                ]
            },
            {
                question: "Em qual das frases o uso da v√≠rgula est√° correto?",
                correctAnswer: "Ele, um grande gestor, resolveu a situa√ß√£o rapidamente.",
                options: [
                    "Ele, um grande gestor resolveu a situa√ß√£o rapidamente.",
                    "Ele um grande gestor, resolveu a situa√ß√£o rapidamente.",
                    "Ele, um grande gestor, resolveu a situa√ß√£o rapidamente."
                ]
            },
            {
                question: "A frase 'Houveram muitos desafios.' est√° correta?",
                correctAnswer: "N√£o. O correto √© 'Houve muitos desafios.'",
                options: [
                    "Sim, est√° correta.",
                    "N√£o. O correto √© 'Houveram desafios muitos.'",
                    "N√£o. O correto √© 'Houve muitos desafios.'",
                ]
            },
            {
                question: "Assinale a op√ß√£o com o uso correto do verbo 'ir' e preposi√ß√£o.",
                correctAnswer: "Os professores foram √† escola para a reuni√£o.",
                options: [
                    "Os professores foram na escola para a reuni√£o.",
                    "Os professores foram √† escola para a reuni√£o.",
                    "Os professores foram a escola para a reuni√£o."
                ]
            },
        ];

        let currentNormaCultQuestionIndex = 0;

        // --- Fun√ß√µes para o Jogo da Norma Culta ---
        const renderNormaCultQuiz = () => {
            const container = document.getElementById('norma-culta-question-container');
            const optionsContainer = document.getElementById('norma-culta-options-container');
            const feedbackDiv = document.getElementById('norma-culta-feedback');
            const nextButton = document.getElementById('norma-culta-next-button');

            if (!container) return; // Guard clause

            if (currentNormaCultQuestionIndex >= normaCultQuizData.length) {
                container.innerHTML = '<p class="text-xl font-bold text-green-700">Parab√©ns! Voc√™ completou o Jogo da Norma Culta.</p>';
                optionsContainer.innerHTML = '';
                nextButton.textContent = "Reiniciar Jogo";
                nextButton.classList.remove('hidden');
                nextButton.removeEventListener('click', handleNextNormaCultQuestion);
                nextButton.addEventListener('click', () => {
                    currentNormaCultQuestionIndex = 0;
                    renderNormaCultQuiz();
                });
                return;
            }

            const currentQuestion = normaCultQuizData[currentNormaCultQuestionIndex];
            document.getElementById('norma-culta-question-text').textContent = currentQuestion.question;
            
            optionsContainer.innerHTML = '';
            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.className = 'bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-gray-300 transition-colors text-sm text-left';
                button.addEventListener('click', () => handleNormaCultAnswer(option));
                optionsContainer.appendChild(button);
            });

            feedbackDiv.textContent = '';
            nextButton.classList.add('hidden');
        };

        const handleNormaCultAnswer = (selectedOption) => {
            const currentQuestion = normaCultQuizData[currentNormaCultQuestionIndex];
            const feedbackDiv = document.getElementById('norma-culta-feedback');
            const optionsContainer = document.getElementById('norma-culta-options-container');
            const nextButton = document.getElementById('norma-culta-next-button');

            if (selectedOption === currentQuestion.correctAnswer) {
                feedbackDiv.textContent = 'Correto! üéâ';
                feedbackDiv.className = 'text-center text-lg font-bold text-green-600';
            } else {
                feedbackDiv.textContent = `Incorreto. A resposta certa era "${currentQuestion.correctAnswer}".`;
                feedbackDiv.className = 'text-center text-lg font-bold text-red-600';
            }

            Array.from(optionsContainer.children).forEach(button => {
                button.disabled = true;
                if (button.textContent === currentQuestion.correctAnswer) {
                    button.classList.remove('bg-gray-200', 'hover:bg-gray-300');
                    button.classList.add('bg-green-200', 'text-green-800');
                } else if (button.textContent === selectedOption) {
                    button.classList.remove('bg-gray-200', 'hover:bg-gray-300');
                    button.classList.add('bg-red-200', 'text-red-800');
                }
            });
            nextButton.classList.remove('hidden');
            nextButton.removeEventListener('click', handleNextNormaCultQuestion);
            nextButton.addEventListener('click', handleNextNormaCultQuestion);
        };

        const handleNextNormaCultQuestion = () => {
            currentNormaCultQuestionIndex++;
            renderNormaCultQuiz();
        };
        
        // --- Fun√ß√µes de Anota√ß√£o (Grifo e Coment√°rio) ---
        function saveData() {
            localStorage.setItem(localStorageKey, JSON.stringify(commentsData));
        }

        function renderComments() {
            const commentsList = document.getElementById('comments-list');
            if (!commentsList) return;
            commentsList.innerHTML = '';
            if (commentsData.length === 0) {
                commentsList.innerHTML = '<p class="text-gray-500 text-center">Nenhum coment√°rio ou grifo adicionado.</p>';
                return;
            }
            const sortedComments = [...commentsData].sort((a, b) => b.id - a.id);
            sortedComments.forEach(comment => {
                const commentDiv = document.createElement('div');
                commentDiv.className = 'p-4 rounded-lg bg-white border border-gray-200 shadow-sm';
                commentDiv.innerHTML = `
                    <p class="font-bold text-sm text-gray-700 mb-1">${comment.type === 'highlight' ? 'Grifo' : 'Coment√°rio'}:</p>
                    <blockquote class="text-sm italic text-gray-600 mb-2 border-l-4 border-gray-300 pl-3">"${comment.text}"</blockquote>
                    ${comment.comment ? `<p class="text-sm text-gray-800 bg-gray-50 p-2 rounded">${comment.comment}</p>` : ''}
                    <div class="text-right mt-2">
                        <button class="delete-comment-button text-red-500 hover:text-red-700 font-semibold text-xs py-1 px-2 rounded hover:bg-red-50" data-id="${comment.id}">Deletar</button>
                    </div>
                `;
                commentsList.appendChild(commentDiv);
            });
            addDeleteEventListeners();
        }

        function addDeleteEventListeners() {
            document.querySelectorAll('.delete-comment-button').forEach(button => {
                button.addEventListener('click', (event) => {
                    const commentIdToDelete = event.target.dataset.id;
                    commentsData = commentsData.filter(c => c.id != commentIdToDelete);
                    saveData();
                    const spanToRemove = document.querySelector(`.highlighted[data-highlight-id='${commentIdToDelete}']`);
                    if (spanToRemove) {
                        spanToRemove.outerHTML = spanToRemove.innerHTML;
                        contentSection.normalize();
                    }
                    renderComments();
                });
            });
        }

        function showActionButtons(event) {
            const selection = window.getSelection();
            if (!selection.rangeCount) return;
            const range = selection.getRangeAt(0);
            if (!contentSection.contains(range.commonAncestorContainer)) return;

            const rect = range.getBoundingClientRect();
            actionButtons.style.display = 'flex';
            actionButtons.style.left = `${rect.left + window.scrollX + (rect.width / 2) - (actionButtons.offsetWidth / 2)}px`;
            actionButtons.style.top = `${rect.top + window.scrollY - actionButtons.offsetHeight - 5}px`;
        }

        function hideActionButtons() {
            if (actionButtons) {
                actionButtons.style.display = 'none';
            }
        }

        function handleHighlight() {
            if (selectionRange) {
                commentsData.push({
                    id: ++lastHighlightId,
                    type: 'highlight',
                    text: selectedText,
                    comment: null
                });
                saveData();
                const span = document.createElement('span');
                span.className = 'highlighted';
                span.dataset.highlightId = lastHighlightId;
                span.textContent = selectedText;
                selectionRange.deleteContents();
                selectionRange.insertNode(span);
                renderComments();
                hideActionButtons();
                setupCommentTooltips();
            }
        }

        function openCommentModal() {
            const modal = document.getElementById('comment-modal');
            const textarea = document.getElementById('comment-textarea');
            modal.style.display = 'flex';
            textarea.value = '';
            textarea.focus();
            hideActionButtons();
        }

        function handleSaveComment() {
            const commentText = document.getElementById('comment-textarea').value;
            const modal = document.getElementById('comment-modal');
            modal.style.display = 'none';
            if (selectionRange && commentText.trim() !== '') {
                commentsData.push({
                    id: ++lastHighlightId,
                    type: 'comment',
                    text: selectedText,
                    comment: commentText.trim()
                });
                saveData();
                const span = document.createElement('span');
                span.className = 'highlighted';
                span.dataset.highlightId = lastHighlightId;
                span.dataset.comment = commentText.trim();
                span.textContent = selectedText;
                selectionRange.deleteContents();
                selectionRange.insertNode(span);
                renderComments();
                setupCommentTooltips();
            }
        }
        
        function setupCommentTooltips() {
            document.querySelectorAll('.highlighted[data-comment]').forEach(span => {
                span.removeEventListener('mouseenter', showCommentTooltip);
                span.removeEventListener('mouseleave', hideCommentTooltip);
                if (!span.querySelector('.comment-box')) {
                    const commentBox = document.createElement('div');
                    commentBox.className = 'comment-box';
                    commentBox.textContent = span.dataset.comment;
                    span.appendChild(commentBox);
                }
                span.addEventListener('mouseenter', showCommentTooltip);
                span.addEventListener('mouseleave', hideCommentTooltip);
            });
        }
        
        function showCommentTooltip(event) {
            const commentBox = event.currentTarget.querySelector('.comment-box');
            if (commentBox) commentBox.style.display = 'block';
        }
        
        function hideCommentTooltip(event) {
            const commentBox = event.currentTarget.querySelector('.comment-box');
            if (commentBox) commentBox.style.display = 'none';
        }

        function applyAllHighlightsOnLoad() {
             if (commentsData.length === 0) return;
            commentsData.forEach(comment => {
                const walker = document.createTreeWalker(contentSection, NodeFilter.SHOW_TEXT, null, false);
                let node;
                while(node = walker.nextNode()) {
                    const index = node.nodeValue.indexOf(comment.text);
                    if (index !== -1 && (!node.parentElement || !node.parentElement.classList.contains('highlighted'))) {
                        try {
                            const range = document.createRange();
                            range.setStart(node, index);
                            range.setEnd(node, index + comment.text.length);
                            const span = document.createElement('span');
                            span.className = 'highlighted';
                            span.dataset.highlightId = comment.id;
                            if (comment.comment) {
                                span.dataset.comment = comment.comment;
                            }
                            range.surroundContents(span);
                            // Sair do loop para n√£o grifar a mesma frase m√∫ltiplas vezes se ela aparecer de novo
                            break; 
                        } catch(e) {
                            console.error("Failed to apply highlight:", e);
                        }
                    }
                }
            });
            setupCommentTooltips();
        }

        // --- Fun√ß√µes de Dados e Renderiza√ß√£o originais ---
        
        // Define as constantes para os elementos da interface do Gemini
        const generateDraftButton = document.getElementById('generate-draft-button');
        const topicSelect = document.getElementById('gemini-topic-select');
        const customTopicTextarea = document.getElementById('gemini-custom-topic');
        const geminiOutputDiv = document.getElementById('gemini-output');
        const geminiOutputText = document.getElementById('gemini-output-text');
        const loadingSpinner = document.getElementById('loading-spinner');
        const geminiPartSelect = document.getElementById('gemini-part-select');
        const geminiOutputTitle = document.getElementById('gemini-output-title');

        // --- INSTRU√á√ïES IMPORTANTES ---
        // 1. Obtenha sua chave de API do Google AI Studio: https://aistudio.google.com/
        // 2. Cole sua chave de API na vari√°vel abaixo, substituindo "COLE_SUA_CHAVE_API_AQUI".
        const GEMINI_API_KEY = "AIzaSyCZRDf8XD18-NxYY1m_s6zTd0vxum4J1N0";

        // Adiciona o event listener para o bot√£o de gerar rascunho
        generateDraftButton.addEventListener('click', async () => {
            let topic = topicSelect.value || customTopicTextarea.value.trim();
            const part = geminiPartSelect.value;
            let prompt = '';
            let title = '';

            if (GEMINI_API_KEY === "COLE_SUA_CHAVE_API_AQUI") {
                geminiOutputText.textContent = 'Erro: A chave de API do Gemini n√£o foi configurada. Por favor, edite o arquivo HTML e adicione sua chave.';
                geminiOutputDiv.classList.remove('hidden');
                return;
            }

            if (!topic) {
                alert('Por favor, selecione um tema ou digite o seu para continuar.');
                return;
            }

            // Define o prompt e o t√≠tulo com base na parte da reda√ß√£o selecionada
            if (part === 'introducao') {
                title = 'Introdu√ß√£o gerada:';
                prompt = `Voc√™ √© um tutor especializado em prepara√ß√£o para concursos p√∫blicos da √°rea de educa√ß√£o. Escreva um par√°grafo de introdu√ß√£o para uma reda√ß√£o dissertativo-argumentativa sobre o tema: "${topic}". A introdu√ß√£o deve ser concisa, apresentar o tema, contextualizar a discuss√£o e, de forma sutil, sugerir a linha de argumenta√ß√£o que ser√° desenvolvida. O texto deve ter um tom formal e ser adequado para um exame de alto n√≠vel. Responda apenas com o par√°grafo de introdu√ß√£o.`;
            } else if (part === 'desenvolvimento') {
                title = 'Par√°grafo de desenvolvimento gerado:';
                prompt = `Voc√™ √© um tutor especializado em prepara√ß√£o para concursos p√∫blicos da √°rea de educa√ß√£o. Escreva um par√°grafo de desenvolvimento para uma reda√ß√£o dissertativo-argumentativa sobre o tema: "${topic}". O par√°grafo deve apresentar um argumento claro, sustentado por um exemplo ou dado concreto. Mantenha um tom formal e linguagem adequada para um exame de alto n√≠vel. Responda apenas com o par√°grafo de desenvolvimento.`;
            } else if (part === 'conclusao') {
                title = 'Conclus√£o gerada:';
                prompt = `Voc√™ √© um tutor especializado em prepara√ß√£o para concursos p√∫blicos da √°rea de educa√ß√£o. Escreva um par√°grafo de conclus√£o para uma reda√ß√£o dissertativo-argumentativa sobre o tema: "${topic}". A conclus√£o deve retomar a tese de forma concisa e apresentar uma proposta de interven√ß√£o social relevante e detalhada, sem introduzir novas informa√ß√µes. Mantenha um tom formal e linguagem adequada para um exame de alto n√≠vel. Responda apenas com o par√°grafo de conclus√£o.`;
            }
            
            // Desabilita o bot√£o e mostra o spinner
            generateDraftButton.disabled = true;
            loadingSpinner.classList.remove('hidden');
            geminiOutputDiv.classList.add('hidden');
            geminiOutputTitle.textContent = title;

            try {
                // Configura√ß√£o da chamada √† API
                const payload = {
                    contents: [{ parts: [{ text: prompt }] }]
                };
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-preview-0514:generateContent?key=${GEMINI_API_KEY}`;
                
                // Realiza a chamada √† API
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) {
                    const errorBody = await response.text();
                    throw new Error(`Erro na API: ${response.status} ${response.statusText}. Detalhes: ${errorBody}`);
                }
                
                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    
                    const generatedText = result.candidates[0].content.parts[0].text;
                    
                    // Exibe o texto gerado na interface
                    geminiOutputText.textContent = generatedText;
                    geminiOutputDiv.classList.remove('hidden');
                    
                } else {
                    throw new Error("A resposta da API n√£o cont√©m o conte√∫do esperado.");
                }
            } catch (error) {
                console.error('Erro detalhado ao chamar a API do Gemini:', error);
                geminiOutputText.textContent = 'Ocorreu um erro ao gerar o rascunho. Verifique sua conex√£o, a chave de API, e tente novamente.';
                geminiOutputDiv.classList.remove('hidden');
            } finally {
                // Restaura o estado do bot√£o e esconde o spinner
                generateDraftButton.disabled = false;
                loadingSpinner.classList.add('hidden');
            }
        });
        
        // --- Event Listeners Principais ---
        
        document.addEventListener('DOMContentLoaded', () => {
            actionButtons = document.getElementById('action-buttons');
            // Anota√ß√µes
            contentSection.addEventListener('mouseup', (event) => {
                if (actionButtons.contains(event.target)) return;
                const selection = window.getSelection();
                const text = selection.toString().trim();
                if (text.length > 0) {
                    selectedText = text;
                    selectionRange = selection.getRangeAt(0);
                    showActionButtons(event);
                } else {
                    hideActionButtons();
                }
            });
            document.addEventListener('mousedown', (event) => {
                if (actionButtons && !contentSection.contains(event.target) && !actionButtons.contains(event.target) && (!document.getElementById('comment-modal') || !document.getElementById('comment-modal').contains(event.target))) {
                    hideActionButtons();
                }
            });

            if (document.getElementById('highlight-button')) document.getElementById('highlight-button').addEventListener('click', handleHighlight);
            if (document.getElementById('comment-button')) document.getElementById('comment-button').addEventListener('click', openCommentModal);
            if (document.getElementById('save-comment-button')) document.getElementById('save-comment-button').addEventListener('click', handleSaveComment);
            if (document.getElementById('cancel-comment-button')) document.getElementById('cancel-comment-button').addEventListener('click', () => {
                document.getElementById('comment-modal').style.display = 'none';
            });
            applyAllHighlightsOnLoad();
            renderComments();

            // Jogos
            renderConnectiveQuiz();
            renderNormaCultQuiz();
        });
    </script>
</body>
</html>
